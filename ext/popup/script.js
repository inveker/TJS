(()=>{"use strict";function t(t){var e,s=0;for(e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return s}console.log("popup"),async function(){let e,s=browser.tabs.query({active:!0,lastFocusedWindow:!0});await s.then((t=>{e=t[0]}));let r=e.url;var o=function(t){return{host:t,async set(t,e){let s=this.host,r=await this.getHostStore();r[t]=e,browser.storage.local.set({[s]:JSON.stringify(r)})},async get(t){return(await this.getHostStore())[t]},async delete(t){let e=this.host,s=await this.getHostStore();delete s[t],browser.storage.local.set({[e]:JSON.stringify(s)})},async clear(){await browser.storage.local.remove(this.host).then()},async getHostStore(){let t=this.host,e={},s=browser.storage.local.get(t);return await s.then((s=>{s[t]&&(e=JSON.parse(s[t]))})),e}}}(new URL(r).hostname);new Vue({el:"#app",data:{a:111,scripts:[],ignoreList:[]},created:function(){let e=this;o.get("scripts").then((s=>{console.log("1",s),null==s?fetch(r).then((t=>t.text())).then((s=>{let r=(new DOMParser).parseFromString(s,"text/html"),n=[];for(let e=0;e<r.scripts.length;e++){let s=r.scripts[e];if(s.src)n.push({type:"file",src:s.src,uniq:s.src});else{let e=s.innerHTML,r=e.slice(0,20);n.push({type:"inline",inner:r,uniq:r+"_"+e.length+"_"+t(e)})}}console.log("scri",n),o.set("scripts",n),e.scripts=n})):e.scripts=s})),o.get("ignored").then((t=>{console.log("ignore",t),null!=t&&(e.ignoreList=t)}))},methods:{updateIgnore(){o.set("ignored",this.ignoreList)}}})}()})();